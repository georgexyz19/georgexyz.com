<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="/theme/css/bs4min.css">
    <link rel="shortcut icon" type="image/x-icon" href="/theme/images/favicon.ico" >
    <link rel="icon" type="image/x-icon" href="/theme/images/favicon.ico" >
<link rel="stylesheet" href="https://www.georgexyz.com/theme/css/friendly.css">
<link rel="stylesheet" href="https://www.georgexyz.com/theme/css/custom.css">
<meta name="author" content="George Zhang" />
<meta name="keywords" content="vim,tip,linux" />
<meta name="description" content="Ubuntu 18.04 comes with a stripped down version of Vim. If you want to use Vim for serious work, you want the full version. Vim Installation The default version â€¦" />
    <title>Vim Tips - George Zhang</title>
  </head>
  <body>
    <!-- navbar -->
    <nav class="navbar navbar-expand-md navbar-light" style="background-color: #e3f2fd;">
      <div class="container">
        <a class="navbar-brand" href="/">George Zhang</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarColor01">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
              <a class="nav-link " 
                href="/articlelist.html">Articles</a>
            </li>
            <li class="nav-item">
              <a class="nav-link pr-3 " 
                href="/tags.html">Tags</a>
            </li>
            <li class="nav-item">
              <a class="nav-link pr-3 "
                 href="/pages/inkscape-tutorial.html">Inkscape Tutorial</a>
            </li>
            <li class="nav-item">
                <a class="nav-link "
                   href="/pages/projects.html">Projects</a>
              </li>
          </ul>

          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link " 
                 href="/pages/about.html">About</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

   

<div class="container">

  <div class="row">
    <div class="col-lg-8 mx-auto">

      <h2>Vim Tips</h2>

      <div class="text-muted mb-2">
        <span>Posted on </span>
        <time datetime="2019-04-01 12:45:00-04:00">
          Monday, 04/01/2019 12:45
        </time>

        <span>with tags: </span>
        <a href="https://www.georgexyz.com/tag/vim.html">vim</a>
/        <a href="https://www.georgexyz.com/tag/tip.html">tip</a>
/        <a href="https://www.georgexyz.com/tag/linux.html">linux</a>
      </div>

      <p>Ubuntu 18.04 comes with a stripped down version of Vim. If you want to use Vim for 
serious work, you want the full version. </p>
<h3>Vim Installation</h3>
<p>The default version is started via command <code>vi</code>. The <code>vi --version</code> command shows 
the version information. Note the Line 5 below shows &#8220;Small version without <span class="caps">GUI</span>&#8221;. 
The output also contains the list of setting files Vim will load during startup. </p>
<div class="highlight"><pre><span></span><code>VIM - Vi IMproved 8.0 (2016 Sep 12, compiled Apr 10 2018 21:31:58)
Included patches: 1-1453
Modified by pkg-vim-maintainers@lists.alioth.debian.org
Compiled by pkg-vim-maintainers@lists.alioth.debian.org
Small version without GUI.  Features included (+) or not (-):
+acl               -extra_search      -mouse_netterm     -tag_old_static
-arabic            -farsi             -mouse_sgr         -tag_any_white
...
+ex_extra          -mouse_jsbterm     +tag_binary 
   system vimrc file: &quot;$VIM/vimrc&quot;
     user vimrc file: &quot;$HOME/.vimrc&quot;
 2nd user vimrc file: &quot;~/.vim/vimrc&quot;
      user exrc file: &quot;$HOME/.exrc&quot;
       defaults file: &quot;$VIMRUNTIME/defaults.vim&quot;
  fall-back for $VIM: &quot;/usr/share/vim&quot;
Compilation: gcc -c -I. -Iproto -DHAVE_CONFIG_H   -Wdate-time  -g -O2 
-fdebug-prefix-map=/build/vim-NQEcoP/vim-8.0.1453=. -fstack-...
</code></pre></div>


<p>If you type command <code>vim</code> in bash, it will tell you that &#8220;command vim not found&#8221;. 
Those three commands remove the existing vim-tiny and install the full version with <span class="caps">GUI</span>
vim-gtk3 in Ubuntu 18.04 or Xubuntu. </p>
<div class="highlight"><pre><span></span><code>sudo apt-get remove vim-tiny
sudo apt-get update
sudo apt-get install vim-gtk3
</code></pre></div>


<p>You can then check the vim version by command <code>vim --version</code>. </p>
<h3>Basic Vim Settings</h3>
<p>Vim automatically loads <code>~/.vimrc</code> file during startup. Some default settings of vim 
do not make sense. Below are some most basic vim settings. </p>
<div class="highlight"><pre><span></span><code>&quot; ~/.vimrc file

set nocompatible              &quot; required
filetype plugin on
syntax enable

&quot;path and find, fuzzy file finder
set path+=**  &quot; search subdir recursively, find ...
set wildmenu

set number

&quot; Set ignore case, highlight, and incremental searches
set ignorecase
set hlsearch
set incsearch

if exists(&quot;+lines&quot;)
  set lines=32
endif
if exists(&quot;+columns&quot;)
  set columns=108
endif

&quot; Ctrl + s to save file
noremap &lt;silent&gt; &lt;C-S&gt;  :update&lt;CR&gt;
vnoremap &lt;silent&gt; &lt;C-S&gt; :&lt;C-C&gt;:update&lt;CR&gt;
inoremap &lt;silent&gt; &lt;C-S&gt; &lt;C-O&gt;:update&lt;CR&gt;

&quot;shortcut ^l to mute highlighting
nnoremap &lt;silent&gt; &lt;C-l&gt; :&lt;C-u&gt;nohlsearch&lt;CR&gt;&lt;C-l&gt;
</code></pre></div>


<h3>Vim Tips</h3>
<h4>Startup</h4>
<p>Vim loads <code>~/.vimrc</code> by default, and you can change the behavior by using <code>-u</code> option on 
command line.</p>
<div class="highlight"><pre><span></span><code>$vim -u ~/.simple.vimrc filename
$vim -u NONE  # do not load any config file
</code></pre></div>


<h4>Set Initial Console Window Size</h4>
<p>On Linux terminal, you can use <code>set lines=50 columns=100</code> to set initial console size. 
I have those lines in my <code>~/.vimrc</code> file. </p>
<div class="highlight"><pre><span></span><code>if exists(&quot;+lines&quot;)
  set lines=32
endif
if exists(&quot;+columns&quot;)
  set columns=108
endif
</code></pre></div>


<p><em>Source: <a href="https://vim.fandom.com/wiki/Maximize_or_set_initial_window_size">an article</a> on fandom.com.</em></p>
<h4>Fuzzy Find</h4>
<p>The following two settings help the <code>:find</code> command to do file fuzzy finding. </p>
<div class="highlight"><pre><span></span><code>set path+=**
set wildmenu
:find *cache # Press Tab key to find file name with cache
</code></pre></div>


<p><em>Source: <a href="https://youtu.be/XA2WjJbmmoM">a video talk</a> on youtube.</em></p>
<h4>Auto Complete</h4>
<p>Vim itself has auto complete function built in. In the insert mode, you can type a 
few letters such as &#8216;Com&#8217;, and then press <code>^n</code> to bring up auto complete menu. It 
is very handy when you are programming because you often need to type variable and 
class names multiple times on a file. </p>
<dl>
<dt>^x^n</dt>
<dd>search in this file, ^ represents Ctrl key </dd>
<dt>^x^f</dt>
<dd>search filename</dd>
<dt>^x^]</dt>
<dd>search tag</dd>
<dt>^n</dt>
<dd>search by default</dd>
<dt>^n  ^p</dt>
<dd>next prev on the menu</dd>
<dt>^y</dt>
<dd>confirm selection, yes</dd>
<dt>^e</dt>
<dd>exit menu</dd>
</dl>
<h4>Current Filename</h4>
<p>Command <code>^g</code> shows the name of the current file. Or you can type the following vim 
commands. </p>
<div class="highlight"><pre><span></span><code>:echo @%
:!ls %:p  # will show absolute path of file
</code></pre></div>


<h4>Navigation</h4>
<p>Keys <code>h j k l</code> are the basic navigation commands in normal mode. Commands <code>w b e</code> 
jump cursor to next word, begin of word, or end of word. Other common navigation 
commands are listed below. </p>
<dl>
<dt>gg</dt>
<dd>move cursor to top</dd>
<dt>G</dt>
<dd>move cursor to bottom</dd>
<dt>:<code>&lt;n&gt;</code></dt>
<dd>jump cursor to line number n, or <code>&lt;n&gt;G</code></dd>
<dt>^e</dt>
<dd>show an extra line</dd>
<dt>^y</dt>
<dd>opposite of ^e</dd>
<dt>^d</dt>
<dd>move down half screen</dd>
<dt>^u</dt>
<dd>move up half screen</dd>
<dt>%</dt>
<dd>matching ( { or [</dd>
<dt>H, M, L</dt>
<dd>move cursor to top, middle, and lower corner</dd>
<dt>^o</dt>
<dd>go to old cursor position</dd>
<dt>^i</dt>
<dd>go to next cursor position</dd>
<dt>gj</dt>
<dd>move down one displayed line when a long line is auto wrapped</dd>
</dl>
<h4>Common Shortcuts</h4>
<p>Vim is in a different league comparing to other text editors. It does not have 
some common shortcuts other editors have. But some of those shortcuts are so 
common, it is better to customize vim to support them. For example, the 
command <code>:saveas</code> is sometimes very convenient. </p>
<p>The settings below add <code>Ctrl+s</code> shortcut for saving file.  Command <code>:update</code> is 
like <code>:write</code>, but only write when buffer has been modified.</p>
<div class="highlight"><pre><span></span><code>noremap &lt;silent&gt; &lt;C-S&gt;  :update&lt;CR&gt;
vnoremap &lt;silent&gt; &lt;C-S&gt; :&lt;C-C&gt;:update&lt;CR&gt;
inoremap &lt;silent&gt; &lt;C-S&gt; &lt;C-O&gt;:update&lt;CR&gt;
</code></pre></div>


<p>This shortcut also needs a setting in <code>.bashrc</code> file to work. </p>
<div class="highlight"><pre><span></span><code>stty -ixon  # stop tele-typewriter, 
            # -ixon enable xon/xoff flow control -i
</code></pre></div>


<p>By default command <code>^s</code> freezes vim in Ubuntu Linux, and <code>^q</code> un-freeze it. 
This <a href="">stackoverflow Q&amp;A</a> 
explains it very well. </p>
<blockquote>
<p><code>Ctrl + s</code> is a common command to terminals to stop updating, it was a way to slow 
the output so you could read it on terminals that did not have a scrollback 
buffer. <code>Ctrl + q</code> command gets terminal going again. Put this line in .bashrc to 
disable flow control for terminal entirely.</p>
</blockquote>
<h4>Spell Check</h4>
<p>Vim has a built in spell checker. You use <code>set spell</code> to turn it on 
and <code>set nospell</code> to turn it off.  Here are some other commands on how to 
use it.</p>
<dl>
<dt>setlocal spell</dt>
<dd>for current buffer only</dd>
<dt>]s</dt>
<dd>move to next misspelled word</dd>
<dt>[s</dt>
<dd>previous misspelled word</dd>
<dt>z=</dt>
<dd>cursor on the word, list of suggested words</dd>
<dt>zg</dt>
<dd>the word is correct, add it to personal dictionary</dd>
</dl>
<p>The <code>spelllang</code> settings is to specify the language, and the default is <code>en</code>. 
You can set it to <code>en_us</code> to specify American English. You can also use 
<code>spellfile</code> setting to specify a personal dictionary file for <code>zg</code> command. </p>
<p><em>Source: <a href="https://www.linux.com/training-tutorials/using-spell-checking-vim/">an article</a> on linux.com <span class="amp">&amp;</span> 
<a href="http://thejakeharding.com/tutorial/2012/06/13/using-spell-check-in-vim.html">a blog post</a> by Jake Harding.</em></p>
<h4><span class="caps">GNOME</span> Terminal Shortcuts</h4>
<p>The Linux Mint comes with Gnome terminal. You can open additional tabs by pressing
shortcut <code>Ctrl + Shift + t</code>, and move to next tab by pressing <code>Ctrl + PageDown</code>. 
This does not necessarily relate to Vim, but I often use them so they are listed here. </p>
<p>Another useful terminal shortcut is <code>Ctrl + z</code> which puts current application Vim 
in the background and suspended. After running some bash commands, you can type <code>fg</code> 
command to bring Vim back to foreground. Or you can use <code>:!</code> followed by a bash 
command to execute the command inside Vim. </p>
<h4>Copy and Paste via Clipboard</h4>
<p>Copying texts to and from Vim using the <code>Ctrl + c</code> and <code>Ctrl + v</code> does not work.
The command <code>^c</code> is to generate a signal which tells the current process to
terminate, and command <code>^v</code> invokes &#8220;verbatim insert&#8221; in bash (see <a href="https://www.howtogeek.com/440558/how-to-copy-and-paste-text-at-linuxs-bash-shell/">an online
article</a>) .
You could use Gnome terminal shortcuts <code>Ctrl + Shift + c</code> and <code>Ctrl + Shift +
v</code>, but sometimes it does not work very well. </p>
<p>I often use the <em>clipboard register</em> (<code>"+</code>) to copy and paste texts in and out of Vim. Here 
are the steps to copy texts into Vim, </p>
<ol>
<li>Copy texts in another program such as Firefox.</li>
<li><code>Alt + Tab</code> switch focus to Vim.</li>
<li>Use command <code>"+p</code> to paste the texts.</li>
</ol>
<p>Here are the steps to copy texts out of Vim to another program.</p>
<ol>
<li>Use <code>v</code> command to visually select texts in Vim.</li>
<li>Type command <code>"+y</code> to copy the texts to clipboard.</li>
<li>In another program, use <code>^v</code> to paste the texts. </li>
</ol>
<p>There is an 
<a href="https://superuser.com/questions/61226/configure-vim-for-copy-and-paste-keyboard-shortcuts-from-system-buffer-in-ubuntu">online Q&amp;A</a>
on how to map <code>^c</code> and <code>^v</code> to copy and paste behavior, but I have not 
set it up in my <code>.vimrc</code> file. </p>
<h4>Work Sessions</h4>
<p>When you have 10 or more text files open in Vim and need to reboot your computer, you 
can use session commands to save the Vim work status and load them later.</p>
<dl>
<dt>:mksession ~/work1.session</dt>
<dd>save the current work status</dd>
<dt>:source ~/work1.session</dt>
<dd>load the saved session in Vim</dd>
<dt>vim -S ~/work1.session</dt>
<dd>bash command to load vim and work session</dd>
</dl>
<h4>Manage Buffers</h4>
<p>Text files opened in Vim are called buffers. You can open multiple files with bash 
command like this <code>vim *.py</code>, and all python files in current directory will open 
in Vim as buffers. The command <code>:ls</code> shows all buffers in current vim session. Note 
that command <code>:!ls</code> will execute a single bash command <code>ls</code>. </p>
<p>On the list generated by the <code>:ls</code> command, <code>%</code> represents current buffer and <code>#</code> 
represents alternate buffer. You can switch between the current buffer and 
alternate buffer. The <code>+</code> symbol on the list represents the file has been 
modified but not saved.  The commands listed below are for navigating between buffers.</p>
<p>When writting Python programs in Vim, you can run the command <code>:!python3 %</code> 
to run the current file. </p>
<dl>
<dt>:bnext, bprevious, bfirst, blast</dt>
<dd>next, previous, first, and last buffer</dd>
<dt>:b5</dt>
<dd>open buffer number 5 </dd>
<dt>:bdelete 5, 6, 8</dt>
<dd>close buffer numbers 5, 6, and 8</dd>
<dt>:5,7bdelete</dt>
<dd>delete buffer numbers 5, 6, and 7</dd>
<dt>:edit file1</dt>
<dd>open file1 as an additional buffer</dd>
<dt>:find file1</dt>
<dd>open file1, this command also searches sub-directories</dd>
<dt>:b# or ^6</dt>
<dd>switch between current buffer and alternate buffer</dd>
</dl>
<h4>Map Caps Lock Key</h4>
<p>Some people recommend to map CapsLock key to Esc key when using Vim.
Stackoverflow has a Q&amp;A on how to do it. The following two lines of code in
.vimrc file will do the trick. When leaving Vim, it will remap the key back to
Caps Lock. The xmodmap software is already installed in Linux Mint, so no
installation is needed. </p>
<div class="highlight"><pre><span></span><code>au VimEnter * silent! !xmodmap -e &#39;clear Lock&#39; 
    -e &#39;keycode 0x42 = Escape&#39;
au VimLeave * silent! !xmodmap -e &#39;clear Lock&#39; 
    -e &#39;keycode 0x42 = Caps_Lock&#39;
</code></pre></div>


<p>I am used to press <code>Esc</code> key to enter normal mode, and I find the 
Caps Lock key is not as straightforward as the Escape key.</p>
<p><em>Source: <a href="https://stackoverflow.com/questions/2176532/how-to-map-caps-lock-key-in-vim">an stackoverflow Q&amp;A</a></em></p>
<h4>Vim Command to Reflow Texts to 80 Columns.</h4>
<p>When writting articles in Vim, I often need to reflow texts after some editing. To
reflow texts, the first step is to set the <code>textwidth</code> and the second step is
to select texts and reflow with command <code>gq</code>. </p>
<p>You can set the <code>textwidth</code> to 80 (:set textwidth=80 or :set tw=80), then use
<code>gg</code> to move cursor to the start of the file and type <code>gqG</code> to reflow 
the whole article. The command <code>gq</code> also works with visual selection.  You
can use command <code>vipgq</code> to select the paragraph first and then reflow. Or you
can use <code>gqap</code> to reflow current paragraph, and <code>gq}</code> reflow texts from current
cursor to end of the paragraph. Note you can select a paragraph by typing <code>vip</code> or
<code>vap</code> </p>
<p>Command <code>gw</code> is similar to <code>gq</code>.  Here is the quote from help page. </p>
<blockquote>
<p>gw: Format the lines that {motion} moves over. Similar to 
gq but puts the cursor back at the same position in the text. </p>
</blockquote>
<p><em>Source: <a href="https://stackoverflow.com/questions/3033423/vim-command-to-restructure-force-text-to-80-columns">an stackoverflow Q&amp;A</a></em></p>
<h4>Run Commands on Multiple Lines</h4>
<p>If you want to run a normal mode command on a range of lines, you can use the
<code>normal</code> command.  For example if you want to comment out line 4 to 6 of
.bashrc file, you can use <code>V</code> to select those lines and apply command
<code>:'&lt;,'&gt;normal i#</code> to insert a character (#) in font of each line.  </p>
<div class="highlight"><pre><span></span><code># Load pyenv automatically by adding
# the following to ~/.bashrc:

export PATH=&quot;/home/george/.pyenv/bin:$PATH&quot;
eval &quot;$(pyenv init -)&quot;
eval &quot;$(pyenv virtualenv-init -)&quot;
</code></pre></div>


<p><em>Source: Practical Vim Second Edition by Drew Neil Page 63, Tip 30</em></p>
<h4>Links and References</h4>
<p><a href="https://vim.rtorr.com/">Vim Cheat Sheet</a> 
is a nice single web page which includes command vim commands.</p>



    </div>
  </div>

</div>

   
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  </body>
</html>